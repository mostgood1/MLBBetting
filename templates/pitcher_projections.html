<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Daily Pitcher Projections</title>
	<style>
		body { font-family: Segoe UI, Arial, sans-serif; background: #0b1220; color: #e5f2ff; margin: 0; }
		.container { max-width: 1100px; margin: 0 auto; padding: 20px; }
		h1 { margin: 10px 0 20px; font-weight: 700; }
		.toolbar { display: flex; gap: 10px; align-items: center; margin-bottom: 16px; }
		input, select, button { padding: 8px 10px; border-radius: 8px; border: 1px solid #2a3a5a; background: #0f1a2e; color: #e5f2ff; }
		button { background: #18b7a0; border-color: #18b7a0; cursor: pointer; font-weight: 600; }
		button:hover { background: #10a38e; }
		.grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
		.row { display: contents; }
		.cell { padding: 10px; border: 1px solid #1f2b48; background: rgba(255,255,255,0.03); border-radius: 6px; font-size: 0.9rem; }
		.header .cell { background: rgba(24,183,160,0.12); font-weight: 700; }
		.rec { font-weight: 700; }
		.rec.over { color: #35d07f; }
		.rec.under { color: #ff7a7a; }
		.muted { opacity: 0.8; font-size: 0.85rem; }
		.back { text-decoration: none; color: #18b7a0; margin-right: auto; }
	</style>
	<script>
		async function loadProjections() {
			const date = document.getElementById('date').value;
			const res = await fetch(`/api/pitcher-projections?date=${date}`);
			const data = await res.json();
			const grid = document.getElementById('grid');
			grid.innerHTML = '';
			if (!data.success) { grid.innerHTML = `<div class="cell">Failed: ${data.error||'unknown'}</div>`; return; }
			for (const p of data.projections) {
				const row = document.createElement('div');
				row.className = 'row';
				row.innerHTML = `
					<div class="cell"><div><strong>${p.pitcher}</strong></div><div class="muted">${p.team} vs ${p.opponent}</div></div>
					<div class="cell">Outs: ${p.proj.outs} (${p.lines.outs??'—'})<br/>Ks: ${p.proj.strikeouts} (${p.lines.strikeouts??'—'})</div>
					<div class="cell">ER: ${p.proj.earned_runs} (${p.lines.earned_runs??'—'})<br/>HA: ${p.proj.hits_allowed} (${p.lines.hits_allowed??'—'})</div>
					<div class="cell">PC: ${p.proj.pitch_count}${p.inputs && p.inputs.pp_out ? ` (ppo ${p.inputs.pp_out})` : ''}</div>
					<div class="cell rec ${p.recommendation && p.recommendation.side==='OVER' ? 'over' : 'under'}">${p.recommendation ? `${p.recommendation.side} ${p.recommendation.market} (${p.recommendation.edge?.toFixed?.(2)??''})` : '—'}</div>
				`;
				grid.appendChild(row);
			}
		}
		window.addEventListener('DOMContentLoaded', loadProjections);
	</script>
	</head>
	<body>
		<div class="container">
			<div class="toolbar">
				<a class="back" href="/">← Back</a>
				<h1 style="margin:0;">Daily Pitcher Projections</h1>
			</div>
			<div class="toolbar">
				<label>Date <input type="date" id="date" value="{{ date }}" /></label>
				<button onclick="loadProjections()">Refresh</button>
			</div>
			<div class="grid header">
				<div class="cell">Pitcher</div>
				<div class="cell">Outs / Ks</div>
				<div class="cell">ER / Hits Allowed</div>
				<div class="cell">Pitch Count</div>
				<div class="cell">Recommendation</div>
			</div>
			<div class="grid" id="grid"></div>
		</div>
	</body>
</html>
